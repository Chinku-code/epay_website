server {
    listen 8080;
    server_name {{ .Values.envHost }};

    root /usr/share/nginx/html;

    location {{ .Values.prefix }} {
        alias /usr/share/nginx/html{{ .Values.prefix }}/;
        try_files $uri $uri/ {{ .Values.prefix }}/index.html;
    }
}

configmap-nginx.yaml

apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "Epay_Website.fullname" . }}-nginx
data:
  nginx.conf: |
{{ tpl (.Files.Get "nginx.conf.template") . | indent 4 }}
