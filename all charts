.trigger_cd:
  stage: deploy
  variables:
    DEPLOYMENT_BRANCH: "main"
  trigger:
    project: epay/devops/deployment
    branch: $DEPLOYMENT_BRANCH
    strategy: depend
    forward:
      pipeline_variables: true
      yaml_variables: true
  # manual_confirmation: 'Are you sure you want to deploy VERSION to ENV?'
  # rules:
  #   # - if: $CI_COMMIT_BRANCH =~ /^(main)|(develop)|(release)(\/.+)*$/ 
  #   - if: $CI_PIPELINE_SOURCE == "merge_request_event" && $CI_MERGE_REQUEST_TARGET_BRANCH_NAME =~ /^(main)|(develop)|(release)(\/.+)*$/
  #     # default rule: preven the stage from running unless conditions are met
  #     when: manual
  #     allow_failure: true
  #   - when: never  
